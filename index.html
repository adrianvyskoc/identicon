<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>identicon-avatar</title>
    <script type="module" src="./src/index.ts"></script>
    <style>
      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

      body {
        font-family: system-ui, sans-serif;
        background: #0f0f0f;
        color: #e8e8e8;
        min-height: 100vh;
        padding: 3rem 2rem;
      }

      h1 {
        font-size: 1.1rem;
        font-weight: 500;
        letter-spacing: 0.05em;
        color: #888;
        margin-bottom: 3rem;
      }

      h1 span { color: #e8e8e8; }

      section { margin-bottom: 3.5rem; }

      h2 {
        font-size: 0.75rem;
        font-weight: 400;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: #555;
        margin-bottom: 1.5rem;
      }

      .grid {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        align-items: flex-end;
      }

      .avatar-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.6rem;
      }

      .avatar-wrap span {
        font-size: 0.7rem;
        color: #555;
        letter-spacing: 0.04em;
      }

      identicon-avatar { display: block; }
      identicon-avatar[size="sm"] { font-size: 0.6rem; }
      identicon-avatar[size="md"] { font-size: 1rem; }
      identicon-avatar[size="lg"] { font-size: 1.6rem; }
      identicon-avatar[size="xl"] { font-size: 2.4rem; }

      /* live demo */
      .live {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      input {
        background: #1a1a1a;
        border: 1px solid #333;
        border-radius: 6px;
        color: #e8e8e8;
        font-size: 0.95rem;
        padding: 0.55rem 0.9rem;
        width: 220px;
        outline: none;
        transition: border-color 0.15s;
      }

      input:focus { border-color: #555; }
      input::placeholder { color: #444; }

      #live-circle, #live-square { font-size: 1.4rem; transition: opacity 0.15s; }
    </style>
  </head>
  <body>
    <h1><span>identicon-avatar</span> &nbsp;·&nbsp; web component showcase</h1>

    <!-- shapes -->
    <section>
      <h2>Shapes</h2>
      <div class="grid">
        <div class="avatar-wrap">
          <identicon-avatar name="alice" shape="circle"></identicon-avatar>
          <span>circle (default)</span>
        </div>
        <div class="avatar-wrap">
          <identicon-avatar name="alice" shape="square"></identicon-avatar>
          <span>square</span>
        </div>
      </div>
    </section>

    <!-- sizes via font-size -->
    <section>
      <h2>Sizes &nbsp;<small style="font-size:0.8em;opacity:.4">(controlled via font-size)</small></h2>
      <div class="grid">
        <div class="avatar-wrap">
          <identicon-avatar name="bob" shape="circle" size="sm"></identicon-avatar>
          <span>0.6 em</span>
        </div>
        <div class="avatar-wrap">
          <identicon-avatar name="bob" shape="circle" size="md"></identicon-avatar>
          <span>1 em</span>
        </div>
        <div class="avatar-wrap">
          <identicon-avatar name="bob" shape="circle" size="lg"></identicon-avatar>
          <span>1.6 em</span>
        </div>
        <div class="avatar-wrap">
          <identicon-avatar name="bob" shape="circle" size="xl"></identicon-avatar>
          <span>2.4 em</span>
        </div>
      </div>
    </section>

    <!-- variety of names -->
    <section>
      <h2>A few names</h2>
      <div class="grid" id="name-grid"></div>
    </section>

    <!-- live demo -->
    <section>
      <h2>Live</h2>
      <div class="live">
        <input id="live-input" type="text" placeholder="type any name…" value="you" />
        <identicon-avatar id="live-circle" name="you" shape="circle" size="lg"></identicon-avatar>
        <identicon-avatar id="live-square" name="you" shape="square" size="lg"></identicon-avatar>
      </div>
    </section>

    <script type="module">
      // Populate name grid
      const names = ['alice', 'bob', 'carol', 'dave', 'eve', 'frank', 'grace', 'heidi'];
      const grid = document.getElementById('name-grid');
      for (const name of names) {
        const wrap = document.createElement('div');
        wrap.className = 'avatar-wrap';
        wrap.innerHTML = `
          <identicon-avatar name="${name}" shape="circle" style="font-size:1.2rem"></identicon-avatar>
          <span>${name}</span>`;
        grid.appendChild(wrap);
      }

      // Live input — replace element to trigger connectedCallback
      const input = document.getElementById('live-input');
      function updateLive(value) {
        if (!value.trim()) return;
        for (const id of ['live-circle', 'live-square']) {
          const old = document.getElementById(id);
          const fresh = document.createElement('identicon-avatar');
          fresh.id = id;
          fresh.setAttribute('name', value.trim());
          fresh.setAttribute('shape', id === 'live-circle' ? 'circle' : 'square');
          fresh.setAttribute('size', 'lg');
          old.replaceWith(fresh);
        }
      }
      input.addEventListener('input', e => updateLive(e.target.value));
    </script>
  </body>
</html>
